import{B as n}from"./basedecoder-07ibxAr6.js";function t(n,t){for(let e=t.length-1;e>=0;e--)n.push(t[e]);return n}function e(n){const e=new Uint16Array(4093),r=new Uint8Array(4093);for(let t=0;t<=257;t++)e[t]=4096,r[t]=t;let o=258,f=9,i=0;function c(){o=258,f=9}function s(n){const t=function(n,t,e){const r=t%8,o=Math.floor(t/8),f=8-r,i=t+e-8*(o+1);let c=8*(o+2)-(t+e);const s=8*(o+2)-t;if(c=Math.max(0,c),o>=n.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),257;let l=n[o]&2**(8-r)-1;l<<=e-f;let u=l;if(o+1<n.length){let t=n[o+1]>>>c;t<<=Math.max(0,e-s),u+=t}if(i>8&&o+2<n.length){const r=8*(o+3)-(t+e);u+=n[o+2]>>>r}return u}(n,i,f);return i+=f,t}function l(n,t){return r[o]=t,e[o]=n,o++,o-1}function u(n){const t=[];for(let o=n;4096!==o;o=e[o])t.push(r[o]);return t}const a=[];c();const h=new Uint8Array(n);let d,g=s(h);for(;257!==g;){if(256===g){for(c(),g=s(h);256===g;)g=s(h);if(257===g)break;if(g>256)throw new Error(`corrupted code at scanline ${g}`);t(a,u(g)),d=g}else if(g<o){const n=u(g);t(a,n),l(d,n[n.length-1]),d=g}else{const n=u(d);if(!n)throw new Error(`Bogus entry. Not in dictionary, ${d} / ${o}, position: ${i}`);t(a,n),a.push(n[n.length-1]),l(d,n[n.length-1]),d=g}o+1>=2**f&&(12===f?d=void 0:f++),g=s(h)}return new Uint8Array(a)}class r extends n{decodeBlock(n){return e(n).buffer}}export{r as default};
//# sourceMappingURL=lzw-QNgM6lPu.js.map
