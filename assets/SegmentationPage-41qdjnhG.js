import { u as useNavigate, j as jsxRuntimeExports } from "./index-D694obFq.js";
import { b as reactExports } from "./leaflet-CCUyKKIY.js";
import { M as Map } from "./Map-DjRk7Cda.js";
import { l as lineString, a as length, b as lineSliceAlong, f as feature, c as bbox } from "./turf-C25yoSNr.js";
import { i as indexedDBService } from "./indexedDBService-C0Tzj_Tb.js";
import { E as ErrorAlert } from "./ErrorAlert-DlvKuJCH.js";
import { F as ForwardRef$6 } from "./CheckCircleIcon-B9WHPi_i.js";
import { F as ForwardRef$7 } from "./ArrowLeftIcon-DL0uFl_m.js";
import { F as ForwardRef$8 } from "./ArrowRightIcon-Dk6_6lE4.js";
import "./georaster-layer-D-eO7TID.js";
import "./georaster-UMjhm2qh.js";
import "./geotiff-70LCDX0v.js";
/* empty css                      */
function BeakerIcon({
  title,
  titleId,
  ...props
}, svgRef) {
  return /* @__PURE__ */ reactExports.createElement("svg", Object.assign({
    xmlns: "http://www.w3.org/2000/svg",
    fill: "none",
    viewBox: "0 0 24 24",
    strokeWidth: 1.5,
    stroke: "currentColor",
    "aria-hidden": "true",
    "data-slot": "icon",
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /* @__PURE__ */ reactExports.createElement("title", {
    id: titleId
  }, title) : null, /* @__PURE__ */ reactExports.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    d: "M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"
  }));
}
const ForwardRef$5 = /* @__PURE__ */ reactExports.forwardRef(BeakerIcon);
function Cog6ToothIcon({
  title,
  titleId,
  ...props
}, svgRef) {
  return /* @__PURE__ */ reactExports.createElement("svg", Object.assign({
    xmlns: "http://www.w3.org/2000/svg",
    fill: "none",
    viewBox: "0 0 24 24",
    strokeWidth: 1.5,
    stroke: "currentColor",
    "aria-hidden": "true",
    "data-slot": "icon",
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /* @__PURE__ */ reactExports.createElement("title", {
    id: titleId
  }, title) : null, /* @__PURE__ */ reactExports.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    d: "M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"
  }), /* @__PURE__ */ reactExports.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    d: "M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"
  }));
}
const ForwardRef$4 = /* @__PURE__ */ reactExports.forwardRef(Cog6ToothIcon);
function CubeTransparentIcon({
  title,
  titleId,
  ...props
}, svgRef) {
  return /* @__PURE__ */ reactExports.createElement("svg", Object.assign({
    xmlns: "http://www.w3.org/2000/svg",
    fill: "none",
    viewBox: "0 0 24 24",
    strokeWidth: 1.5,
    stroke: "currentColor",
    "aria-hidden": "true",
    "data-slot": "icon",
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /* @__PURE__ */ reactExports.createElement("title", {
    id: titleId
  }, title) : null, /* @__PURE__ */ reactExports.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    d: "m21 7.5-2.25-1.313M21 7.5v2.25m0-2.25-2.25 1.313M3 7.5l2.25-1.313M3 7.5l2.25 1.313M3 7.5v2.25m9 3 2.25-1.313M12 12.75l-2.25-1.313M12 12.75V15m0 6.75 2.25-1.313M12 21.75V19.5m0 2.25-2.25-1.313m0-16.875L12 2.25l2.25 1.313M21 14.25v2.25l-2.25 1.313m-13.5 0L3 16.5v-2.25"
  }));
}
const ForwardRef$3 = /* @__PURE__ */ reactExports.forwardRef(CubeTransparentIcon);
function ExclamationTriangleIcon({
  title,
  titleId,
  ...props
}, svgRef) {
  return /* @__PURE__ */ reactExports.createElement("svg", Object.assign({
    xmlns: "http://www.w3.org/2000/svg",
    fill: "none",
    viewBox: "0 0 24 24",
    strokeWidth: 1.5,
    stroke: "currentColor",
    "aria-hidden": "true",
    "data-slot": "icon",
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /* @__PURE__ */ reactExports.createElement("title", {
    id: titleId
  }, title) : null, /* @__PURE__ */ reactExports.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    d: "M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"
  }));
}
const ForwardRef$2 = /* @__PURE__ */ reactExports.forwardRef(ExclamationTriangleIcon);
function InformationCircleIcon({
  title,
  titleId,
  ...props
}, svgRef) {
  return /* @__PURE__ */ reactExports.createElement("svg", Object.assign({
    xmlns: "http://www.w3.org/2000/svg",
    fill: "none",
    viewBox: "0 0 24 24",
    strokeWidth: 1.5,
    stroke: "currentColor",
    "aria-hidden": "true",
    "data-slot": "icon",
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /* @__PURE__ */ reactExports.createElement("title", {
    id: titleId
  }, title) : null, /* @__PURE__ */ reactExports.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    d: "m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"
  }));
}
const ForwardRef$1 = /* @__PURE__ */ reactExports.forwardRef(InformationCircleIcon);
function MapPinIcon({
  title,
  titleId,
  ...props
}, svgRef) {
  return /* @__PURE__ */ reactExports.createElement("svg", Object.assign({
    xmlns: "http://www.w3.org/2000/svg",
    fill: "none",
    viewBox: "0 0 24 24",
    strokeWidth: 1.5,
    stroke: "currentColor",
    "aria-hidden": "true",
    "data-slot": "icon",
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /* @__PURE__ */ reactExports.createElement("title", {
    id: titleId
  }, title) : null, /* @__PURE__ */ reactExports.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    d: "M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"
  }), /* @__PURE__ */ reactExports.createElement("path", {
    strokeLinecap: "round",
    strokeLinejoin: "round",
    d: "M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"
  }));
}
const ForwardRef = /* @__PURE__ */ reactExports.forwardRef(MapPinIcon);
function segmentShoreline(shoreline, resolution) {
  const segments = [];
  let segmentId = 1;
  shoreline.features.forEach((feature2) => {
    const lines = feature2.geometry.type === "MultiLineString" ? feature2.geometry.coordinates.map((coords) => lineString(coords)) : [lineString(feature2.geometry.coordinates)];
    lines.forEach((line, lineIndex) => {
      const length$1 = length(line, { units: "meters" });
      const numSegments = Math.ceil(length$1 / resolution);
      const actualResolution = length$1 / numSegments;
      for (let i = 0; i < numSegments; i++) {
        const start = i * actualResolution;
        const end = Math.min((i + 1) * actualResolution, length$1);
        const segment = lineSliceAlong(line, start, end, { units: "meters" });
        const segmentLength = length(segment, { units: "meters" });
        segments.push({
          type: "Feature",
          id: `segment-${segmentId++}`,
          geometry: segment.geometry,
          properties: {
            id: `segment-${segmentId}`,
            index: i,
            lineIndex,
            length: segmentLength,
            values: {}
          },
          parameters: {}
        });
      }
    });
  });
  return segments;
}
function SegmentationPage() {
  const navigate = useNavigate();
  const [originalGeoJSON, setOriginalGeoJSON] = reactExports.useState(null);
  const [resolution, setResolution] = reactExports.useState("");
  const [segmentsPreview, setSegmentsPreview] = reactExports.useState([]);
  const [mapInitialBounds, setMapInitialBounds] = reactExports.useState(null);
  const [totalShorelineLength, setTotalShorelineLength] = reactExports.useState(0);
  const [estimatedSegments, setEstimatedSegments] = reactExports.useState(0);
  const [loading, setLoading] = reactExports.useState(true);
  const [processing, setProcessing] = reactExports.useState(false);
  const [error, setError] = reactExports.useState(null);
  const [isPreviewDone, setIsPreviewDone] = reactExports.useState(false);
  reactExports.useEffect(() => {
    const loadShorelineData = async () => {
      setLoading(true);
      setError(null);
      try {
        const shorelineId = "current-shoreline";
        const data = await indexedDBService.getShorelineData(shorelineId);
        if (!data) {
          setError("No shoreline data found. Please upload a shapefile first.");
          navigate("/shoreline");
          return;
        }
        if (data.features.every((feature2) => feature2.geometry.type === "LineString" || feature2.geometry.type === "MultiLineString")) {
          const validGeoJSON = data;
          setOriginalGeoJSON(validGeoJSON);
          let totalLengthKm = 0;
          validGeoJSON.features.forEach((feature$1) => {
            try {
              totalLengthKm += length(feature(feature$1.geometry), { units: "kilometers" });
            } catch (err) {
              console.warn("Error calculating length for a feature:", err);
            }
          });
          setTotalShorelineLength(totalLengthKm);
          if (validGeoJSON.features.length > 0) {
            try {
              const bbox$1 = bbox(validGeoJSON);
              if (bbox$1 && bbox$1.length === 4 && bbox$1.every((b) => isFinite(b)) && bbox$1[0] <= bbox$1[2] && bbox$1[1] <= bbox$1[3]) {
                const bounds = [[bbox$1[1], bbox$1[0]], [bbox$1[3], bbox$1[2]]];
                setMapInitialBounds(bounds);
              } else {
                console.warn("SegmentationPage: Could not calculate valid initial bounds.");
              }
            } catch (e) {
              console.error("SegmentationPage: Error calculating initial bounds:", e);
            }
          }
        } else {
          throw new Error("Invalid geometry type found in shoreline data. Only LineString or MultiLineString are supported.");
        }
      } catch (err) {
        console.error("Error loading shoreline data:", err);
        setError(`Failed to load shoreline data: ${err instanceof Error ? err.message : String(err)}`);
      } finally {
        setLoading(false);
      }
    };
    loadShorelineData();
  }, [navigate]);
  reactExports.useEffect(() => {
    if (typeof resolution === "number" && resolution > 0 && totalShorelineLength > 0) {
      setEstimatedSegments(Math.ceil(totalShorelineLength * 1e3 / resolution));
    } else {
      setEstimatedSegments(0);
    }
  }, [resolution, totalShorelineLength]);
  const handleResolutionChange = reactExports.useCallback((event) => {
    const value = event.target.value;
    const numValue = value === "" ? "" : Number(value);
    setResolution(numValue);
    setError(null);
    setIsPreviewDone(false);
    setSegmentsPreview([]);
  }, []);
  const handlePreviewSegmentation = reactExports.useCallback(() => {
    if (!resolution || resolution <= 0) {
      setError("Resolution must be a positive number (meters).");
      return;
    }
    if (!originalGeoJSON) {
      setError("Original shoreline data is not loaded.");
      return;
    }
    setProcessing(true);
    setError(null);
    setSegmentsPreview([]);
    setIsPreviewDone(false);
    setTimeout(() => {
      try {
        console.time("Segmentation Calculation");
        const generatedSegments = segmentShoreline(originalGeoJSON, resolution);
        console.timeEnd("Segmentation Calculation");
        setSegmentsPreview(generatedSegments);
        setIsPreviewDone(true);
        console.log(`Generated ${generatedSegments.length} segments for preview.`);
      } catch (err) {
        setError(err instanceof Error ? err.message : "Failed to generate segment preview.");
        console.error("Segmentation preview error:", err);
      } finally {
        setProcessing(false);
      }
    }, 10);
  }, [originalGeoJSON, resolution]);
  const handleContinue = reactExports.useCallback(async () => {
    if (!isPreviewDone || segmentsPreview.length === 0) {
      setError("Please generate and preview the segmentation first using the 'Preview Segmentation' button.");
      return;
    }
    setProcessing(true);
    setError(null);
    try {
      await indexedDBService.storeShorelineData("current-segments", {
        type: "FeatureCollection",
        features: segmentsPreview.map((segment) => ({
          type: "Feature",
          geometry: segment.geometry,
          properties: segment.properties
        }))
      });
      console.log("Confirmed segments stored in IndexedDB.");
      navigate("/segment-table");
    } catch (err) {
      console.error("Error storing segments:", err);
      setError(`Failed to save segments: ${err instanceof Error ? err.message : String(err)}`);
    } finally {
      setProcessing(false);
    }
  }, [isPreviewDone, segmentsPreview, navigate]);
  const handleBack = reactExports.useCallback(() => {
    navigate("/shoreline");
  }, [navigate]);
  const geoJSONForMap = reactExports.useMemo(() => {
    if (isPreviewDone && segmentsPreview.length > 0) {
      return {
        type: "FeatureCollection",
        features: segmentsPreview.map((segment) => ({
          type: "Feature",
          geometry: segment.geometry,
          properties: { ...segment.properties, id: segment.id }
        }))
      };
    }
    return originalGeoJSON;
  }, [originalGeoJSON, segmentsPreview, isPreviewDone]);
  const mapStylingMode = reactExports.useMemo(() => isPreviewDone ? "parameter" : void 0, [isPreviewDone]);
  if (loading) {
    return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-center h-screen", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "ml-4 text-gray-600", children: "Loading shoreline data..." })
    ] });
  }
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "text-center mb-10", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-3xl font-extrabold text-primary-900 tracking-tight", children: "2. Segment Shoreline" }),
      /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "mt-3 text-lg text-gray-600", children: "Define the resolution to divide the shoreline into analysis segments." })
    ] }),
    /* @__PURE__ */ jsxRuntimeExports.jsx(ErrorAlert, { message: error, onClose: () => setError(null) }),
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "lg:col-span-1 flex flex-col", children: [
        " ",
        /* @__PURE__ */ jsxRuntimeExports.jsxs("h3", { className: "text-xl font-semibold text-gray-800 mb-4 flex items-center", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$4, { className: "h-6 w-6 mr-2 text-primary-700" }),
          " Segmentation Settings"
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-white p-6 sm:p-8 rounded-lg shadow-md border border-gray-200 space-y-6", children: [
          " ",
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center text-sm text-gray-600 border-b border-gray-200 pb-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef, { className: "h-5 w-5 mr-2 text-primary-600 flex-shrink-0" }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { children: [
              "Total Shoreline Length: ",
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "font-medium text-gray-800", children: [
                totalShorelineLength.toFixed(2),
                " km"
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("label", { htmlFor: "resolution", className: "block text-sm font-medium text-gray-700 mb-2", children: [
              "Segment Resolution/Length ",
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-red-500", children: "*" })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "mt-1 relative rounded-md shadow-md border border-gray-200 bg-gray-50 p-1", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                "input",
                {
                  type: "number",
                  name: "resolution",
                  id: "resolution",
                  placeholder: "Enter resolution (e.g., 10)",
                  value: resolution,
                  onChange: handleResolutionChange,
                  className: "block w-full pr-16 py-3 px-3 text-base rounded-md border-gray-300 focus:border-primary-500 focus:ring-primary-500 disabled:bg-gray-100 bg-white",
                  disabled: processing,
                  "aria-describedby": "resolution-unit",
                  min: "1",
                  step: "1"
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none", children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-gray-500 text-sm", id: "resolution-unit", children: "meters" }) })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "mt-2 text-sm text-gray-600", children: "Enter the desired length for each shoreline segment." })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "p-4 bg-gray-50 rounded-md border border-gray-200 space-y-2", children: [
            " ",
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center text-sm", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$1, { className: "h-5 w-5 mr-2 text-blue-500 flex-shrink-0" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("p", { className: "text-gray-700", children: [
                "Estimated segments: ",
                /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-semibold", children: estimatedSegments.toLocaleString() })
              ] })
            ] }),
            estimatedSegments > 3e5 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-start text-sm text-amber-600", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$2, { className: "h-5 w-5 mr-2 flex-shrink-0 mt-0.5" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Warning: High segment count (>300k) may impact performance." })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center sm:justify-start gap-4", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs(
              "button",
              {
                type: "button",
                onClick: handlePreviewSegmentation,
                disabled: !resolution || resolution <= 0 || processing,
                className: "w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",
                title: !resolution || resolution <= 0 ? "Enter a positive resolution first" : "Generate segment preview on the map",
                children: [
                  /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$5, { className: `h-5 w-5 mr-2 ${processing && !isPreviewDone ? "animate-spin" : ""}` }),
                  processing && !isPreviewDone ? "Generating..." : "Preview Segmentation"
                ]
              }
            ),
            isPreviewDone && segmentsPreview.length > 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center text-sm text-green-600", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$6, { className: "h-5 w-5 mr-1.5" }),
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { children: [
                segmentsPreview.length.toLocaleString(),
                " segments ready."
              ] })
            ] }),
            isPreviewDone && segmentsPreview.length === 0 && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center text-sm text-red-600", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$2, { className: "h-5 w-5 mr-1.5" }),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "No segments generated." })
            ] })
          ] })
        ] })
      ] }),
      " ",
      /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "lg:col-span-1 flex flex-col", children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("h3", { className: "text-xl font-semibold text-gray-800 mb-4 flex items-center", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$3, { className: "h-6 w-6 mr-2 text-primary-700" }),
          "Preview Map"
        ] }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("p", { className: "mb-3 text-sm text-gray-600", children: isPreviewDone ? `Showing ${segmentsPreview.length.toLocaleString()} generated segments (${resolution}m).` : originalGeoJSON ? "Showing original shoreline. Enter resolution & click preview." : "Load shoreline data first." }),
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "bg-gray-100 rounded-lg shadow-inner border border-gray-200 overflow-hidden flex-grow min-h-[500px] relative", children: [
          " ",
          originalGeoJSON ? /* @__PURE__ */ jsxRuntimeExports.jsx(
            Map,
            {
              geoJSON: geoJSONForMap,
              segments: segmentsPreview,
              parameters: [],
              selectedParameter: null,
              selectedSegments: [],
              selectionPolygons: [],
              onSegmentSelect: () => {
              },
              onSelectionDelete: () => {
              },
              onAreaSelect: () => {
              },
              isEditing: false,
              initialBounds: mapInitialBounds,
              stylingMode: mapStylingMode
            }
          ) : /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "absolute inset-0 flex items-center justify-center text-gray-500", children: loading ? "Loading map data..." : "No shoreline data loaded." })
        ] })
      ] }),
      " "
    ] }),
    " ",
    /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "mt-10 pt-6 border-t border-gray-200 flex justify-between items-center", children: [
      /* @__PURE__ */ jsxRuntimeExports.jsxs(
        "button",
        {
          type: "button",
          onClick: handleBack,
          className: "inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",
          children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$7, { className: "h-4 w-4 mr-2" }),
            " Back"
          ]
        }
      ),
      /* @__PURE__ */ jsxRuntimeExports.jsxs(
        "button",
        {
          type: "button",
          onClick: handleContinue,
          disabled: !isPreviewDone || segmentsPreview.length === 0 || processing,
          className: "inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",
          title: !isPreviewDone || segmentsPreview.length === 0 ? "Generate and preview segments first" : "Confirm segments and proceed",
          children: [
            processing && isPreviewDone ? "Saving..." : "Confirm & Continue",
            /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$8, { className: "h-4 w-4 ml-2" })
          ]
        }
      )
    ] })
  ] });
}
export {
  SegmentationPage as default
};
//# sourceMappingURL=SegmentationPage-41qdjnhG.js.map
